import{a as me}from"./chunk-XINPYRBW.js";import{a as K,c as X,e as Y,f as Z,g as ee,i as te,j as ne,k as ie,n as oe,o as re,p as ae,r as le,t as ce,u as se}from"./chunk-TYY4QFMB.js";import"./chunk-L32GYCNB.js";import{a as de}from"./chunk-ZOVDUD5N.js";import{D as R,E as k,Ea as L,F as l,Fa as N,Ha as D,I as F,Ia as U,Lb as G,M as f,Nb as H,P as p,Q as i,R as o,S as g,T,U as V,Ub as J,W as I,X as x,Y as d,aa as w,ba as S,bb as W,ca as y,da as z,ea as s,fa as h,ga as P,ha as $,ja as j,ka as A,la as B,na as Q,oa as b,pa as v,s as O,w as _,x as u}from"./chunk-P4AT3ITB.js";import"./chunk-LTSIZAG7.js";import"./chunk-LZJBAANE.js";import"./chunk-GEL3VHWS.js";import"./chunk-CESVDTFF.js";import"./chunk-NH7O73XC.js";import"./chunk-LYYJ2XOB.js";import"./chunk-4U6PRYVA.js";import"./chunk-4RGYXDAY.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-D4VGNZLR.js";import"./chunk-JHLW7V75.js";import"./chunk-SV7S5NYR.js";import{a as M,b as E}from"./chunk-RW4GY4BD.js";var pe=["modal"],ge=["sentinela"],_e=["segmentContainer"],ue=()=>["/carrinho"];function fe(r,c){if(r&1&&(i(0,"ion-segment-button",12)(1,"ion-label"),s(2),o()()),r&2){let e=c.$implicit;p("value",e),l(2),h(e.toUpperCase())}}function xe(r,c){if(r&1){let e=I();i(0,"ion-card",14),x("click",function(){_(e);let t=d().$implicit,a=d();return u(a.abrirModal(t))}),i(1,"ion-item",15)(2,"ion-thumbnail",16),g(3,"img",17),o(),i(4,"ion-label")(5,"h2"),s(6),o(),i(7,"p"),s(8),o(),i(9,"div",18)(10,"strong"),s(11),b(12,"number"),o(),i(13,"ion-button",19),x("click",function(t){_(e);let a=d().$implicit;return d().adicionar(a),u(t.stopPropagation())}),g(14,"ion-icon",20),o()()()()()}if(r&2){let e=d().$implicit;l(3),p("src",e.imagem,k),l(3),h(e.nome),l(2),h(e.descricao),l(3),P("R$ ",v(12,4,e.preco,"1.2-2"),"")}}function he(r,c){if(r&1&&(T(0),f(1,xe,15,7,"ion-card",13),V()),r&2){let e=c.$implicit,n=d();l(),p("ngIf",e.categoria===n.categoriaSelecionada)}}function Ce(r,c){if(r&1&&(i(0,"ion-footer",21)(1,"ion-toolbar")(2,"div",22)(3,"div",23),s(4),b(5,"number"),o(),i(6,"ion-button",24),g(7,"ion-icon",25),s(8," Ver pedido "),o()()()()),r&2){let e=d();l(4),$(" Total sem entrega (",e.pedidoService.totalItens," itens - R$ ",v(5,3,e.pedidoService.total,"1.2-2"),") "),l(2),p("routerLink",Q(6,ue))}}function be(r,c){if(r&1){let e=I();i(0,"ion-item")(1,"ion-label"),s(2),o(),i(3,"ion-note",44),s(4),b(5,"number"),o(),i(6,"ion-button",45),x("click",function(){let t=_(e).$implicit,a=d(3);return u(a.adicionarExtra(t))}),g(7,"ion-icon",41),o()()}if(r&2){let e=c.$implicit;l(2),h(e.nome),l(2),P("+ R$ ",v(5,2,e.valor,"1.2-2"),"")}}function ve(r,c){if(r&1&&(T(0),i(1,"h3"),s(2,"Acr\xE9scimos"),o(),i(3,"p",43),s(4,"Selecione at\xE9 4 op\xE7\xF5es"),o(),i(5,"ion-list"),f(6,be,8,5,"ion-item",9),o(),V()),r&2){let e=d(2);l(6),p("ngForOf",e.selectedItem.extras)}}function Ie(r,c){if(r&1){let e=I();i(0,"ion-content",26)(1,"div",27)(2,"div",28),g(3,"img",17),o(),i(4,"div",29)(5,"div",30)(6,"h2"),s(7),o(),i(8,"ion-button",31),x("click",function(){_(e),d();let t=z(12);return u(t.dismiss())}),g(9,"ion-icon",32),o()(),i(10,"p",33),s(11),o(),i(12,"p",34),s(13),b(14,"number"),o(),f(15,ve,7,1,"ng-container",35),o()()(),i(16,"ion-footer",36)(17,"div",37)(18,"div",38)(19,"ion-button",39),x("click",function(){_(e);let t=d();return u(t.decrementar())}),g(20,"ion-icon",40),o(),i(21,"span"),s(22),o(),i(23,"ion-button",39),x("click",function(){_(e);let t=d();return u(t.incrementar())}),g(24,"ion-icon",41),o()(),i(25,"ion-button",42),x("click",function(){_(e);let t=d();return u(t.adicionarAoPedido())}),s(26),b(27,"number"),o()()()}if(r&2){let e=d();l(3),p("src",e.selectedItem==null?null:e.selectedItem.imagem,k),l(4),h(e.selectedItem==null?null:e.selectedItem.nome),l(4),h(e.selectedItem==null?null:e.selectedItem.descricao),l(2),P("R$ ",v(14,7,e.selectedItem==null?null:e.selectedItem.preco,"1.2-2"),""),l(2),p("ngIf",e.selectedItem==null||e.selectedItem.extras==null?null:e.selectedItem.extras.length),l(7),h(e.quantidade),l(4),P(" Adicionar R$ ",v(27,10,e.calcularTotal(),"1.2-2")," ")}}var Fe=(()=>{let c=class c{constructor(){this.productService=O(me),this.pedidoService=O(de),this.categoriaSelecionada="hamburguer",this.categorias=[],this.produtos=[],this.quantidade=1,this.loading=R(!1)}ngOnInit(){this.getAll(),this.presentingElement=document.querySelector(".ion-page")}ngAfterViewInit(){let n=this.segmentContainerRef.nativeElement,t=this.sentinelaRef.nativeElement;this.observer=new IntersectionObserver(([a])=>{n.classList.toggle("fixed-segment",!a.isIntersecting)},{root:null,threshold:0}),this.observer.observe(t)}ngOnDestroy(){var n;this.observer&&((n=this.sentinelaRef)!=null&&n.nativeElement)&&this.observer.unobserve(this.sentinelaRef.nativeElement)}getAll(){this.loading.set(!0),this.productService.getAll().subscribe({next:n=>{this.produtos=n,this.categorias=[...new Set(n.map(t=>t.categoria).filter(t=>!!t))],this.categoriaSelecionada=this.categorias[0],this.loading.set(!1)},error:n=>{console.error("Erro ao carregar produtos:",n),this.loading.set(!1)}})}adicionar(n){let t=E(M({},n),{quantidade:1,extras:[],total:n.preco});this.pedidoService.adicionarItem(t)}abrirModal(n){this.selectedItem=n,this.quantidade=1,this.modal.present()}incrementar(){this.quantidade++}decrementar(){this.quantidade>1&&this.quantidade--}adicionarExtra(n){n.quantidade=(n.quantidade||0)+1}calcularTotal(){var a,m;let n=((a=this.selectedItem)==null?void 0:a.preco)||0,t=(((m=this.selectedItem)==null?void 0:m.extras)||[]).reduce((q,C)=>q+(C.quantidade||0)*C.valor,0);return n*this.quantidade+t}adicionarAoPedido(){var t;let n=E(M({},this.selectedItem),{quantidade:this.quantidade,extras:(t=this.selectedItem.extras)==null?void 0:t.filter(a=>a.quantidade),total:this.calcularTotal()});this.pedidoService.adicionarItem(n),this.modal.dismiss()}};c.\u0275fac=function(t){return new(t||c)},c.\u0275cmp=F({type:c,selectors:[["app-products"]],viewQuery:function(t,a){if(t&1&&(w(pe,7),w(ge,7),w(_e,7)),t&2){let m;S(m=y())&&(a.modal=m.first),S(m=y())&&(a.sentinelaRef=m.first),S(m=y())&&(a.segmentContainerRef=m.first)}},decls:14,vars:5,consts:[["sentinela",""],["segmentContainer",""],["modal",""],[1,"ion-padding","no-overlap"],[1,"sentinela"],[1,"segment-container"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"card-grid"],[4,"ngFor","ngForOf"],["class","footer-toolbar",4,"ngIf"],["trigger","open-modal",3,"presentingElement"],[3,"value"],["class","produto-card",3,"click",4,"ngIf"],[1,"produto-card",3,"click"],["lines","none"],["slot","start"],[3,"src"],[1,"preco-adicionar"],["size","small","fill","solid",3,"click"],["slot","icon-only","name","add"],[1,"footer-toolbar"],[1,"footer-content"],[1,"footer-text"],["fill","solid",3,"routerLink"],["slot","start","name","eye-outline"],["fullscreen",""],[1,"modal-container"],[1,"modal-image"],[1,"modal-details"],[1,"modal-header"],["fill","clear","size","small",3,"click"],["name","close"],[1,"descricao"],[1,"preco"],[4,"ngIf"],[1,"modal-footer"],[1,"footer-bar"],[1,"quantidade-selector"],["fill","clear",3,"click"],["name","remove-outline"],["name","add-outline"],["color","primary","expand","block",3,"click"],[1,"sub"],["slot","end"],["fill","clear","slot","end","size","small",3,"click"]],template:function(t,a){if(t&1){let m=I();i(0,"ion-content",3),g(1,"div",4,0),i(3,"div",5,1)(5,"ion-segment",6),B("ngModelChange",function(C){return _(m),A(a.categoriaSelecionada,C)||(a.categoriaSelecionada=C),u(C)}),f(6,fe,3,2,"ion-segment-button",7),o()(),i(7,"ion-list")(8,"div",8),f(9,he,2,1,"ng-container",9),o()(),f(10,Ce,9,7,"ion-footer",10),o(),i(11,"ion-modal",11,2),f(13,Ie,28,13,"ng-template"),o()}t&2&&(l(5),j("ngModel",a.categoriaSelecionada),l(),p("ngForOf",a.categorias),l(3),p("ngForOf",a.produtos),l(),p("ngIf",a.pedidoService.totalItens>0),l(),p("presentingElement",a.presentingElement))},dependencies:[U,L,N,D,J,G,H,W,Y,X,le,ee,ce,ie,re,Z,se,ne,te,ae,K,oe],styles:['@charset "UTF-8";.produto-card[_ngcontent-%COMP%]{margin-bottom:12px;box-shadow:0 2px 8px #0000000d;border-radius:12px;cursor:pointer}.segment-container[_ngcontent-%COMP%]{position:relative;z-index:10}.fixed-segment[_ngcontent-%COMP%]{position:sticky;top:-20px;z-index:100;background:#fff;border-bottom:1px solid #ccc}.sentinela[_ngcontent-%COMP%]{height:60px}ion-thumbnail[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:8px;overflow:hidden}ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:600}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:.9rem;color:#555}.produto-card[_ngcontent-%COMP%]{margin-bottom:12px}.preco-adicionar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:8px}.card-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px;margin-top:16px}ion-content[_ngcontent-%COMP%]{height:88vh}ion-footer[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0}.footer-toolbar[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #c33434}.footer-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 12px;gap:12px;flex-wrap:nowrap}.footer-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-right:2rem;--border-radius: 12px;--background: #222428}.footer-text[_ngcontent-%COMP%]{font-size:16px;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}@media (max-width: 767px){.footer-text[_ngcontent-%COMP%]{font-size:13px;white-space:normal}.footer-content[_ngcontent-%COMP%]{align-items:center}}.modal-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px}.modal-image[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px #0000001a}.modal-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-height:250px;object-fit:cover}.modal-details[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:12px;box-shadow:0 2px 8px #0000001a;margin-bottom:15%}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.descricao[_ngcontent-%COMP%]{color:#555;font-size:14px;margin-bottom:8px}.preco[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#2c3e50}.modal-footer[_ngcontent-%COMP%]{padding:12px 16px;border-top:1px solid #ddd;background-color:#ffffffe6}.footer-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#fff}.quantidade-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}']});let r=c;return r})();export{Fe as ProductsComponent};
