import{A as Q,B as L,Ba as Ce,C as U,Ca as ve,D as W,Da as Pe,E as C,F as v,Fa as Ie,Ha as we,Ia as ye,J as G,K as H,L as J,M as K,O as X,Q as $,R as Y,S as V,T as Z,U as w,V as ee,W as te,X as ne,Y as ie,Z as oe,_ as ae,a as O,aa as re,b as T,c as q,ca as ce,d as u,da as se,e as f,f as z,g as F,h as s,i as D,j as _,k as g,l as r,la as le,m as c,ma as me,n as p,na as de,o as N,p as j,pa as ge,q as P,qa as pe,r as h,s as d,sa as ue,t as k,ta as fe,u as E,ua as _e,v as R,w as A,wa as he,x as l,xa as xe,y as x,ya as be,z as I}from"./chunk-UYFVHI6V.js";import"./chunk-LTSIZAG7.js";import"./chunk-LZJBAANE.js";import"./chunk-GEL3VHWS.js";import"./chunk-CESVDTFF.js";import"./chunk-NH7O73XC.js";import"./chunk-LYYJ2XOB.js";import"./chunk-4U6PRYVA.js";import"./chunk-4RGYXDAY.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-D4VGNZLR.js";import"./chunk-JHLW7V75.js";import"./chunk-SV7S5NYR.js";import{a as y,b as M,f as S}from"./chunk-RW4GY4BD.js";var Se=(()=>{let a=class a{constructor(){this.itens=[]}get totalItens(){return this.itens.length}get total(){return console.log(this.itens),this.itens.reduce((e,t)=>e+t.preco,0)}adicionarItem(e){this.itens.push(e)}limparPedido(){this.itens=[]}};a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=O({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();var Oe=(()=>{let a=class a{constructor(e,t){this.firestore=e,this.storage=t}uploadImage(e,t){return S(this,null,function*(){let i=`products/${t}/${e.name}`,m=ce(this.storage,i);return yield se(m,e),yield re(m)})}create(e){let t=ee(),i=w(V(t,"products"));return ne(i,M(y({},e),{id:i.id}))}getAll(){let e=V(this.firestore,"products");return $(e,{idField:"id"})}update(e,t){return S(this,null,function*(){let i=w(this.firestore,`products/${e}`);yield ie(i,t)})}delete(e){return S(this,null,function*(){let t=w(this.firestore,`products/${e}`);yield Z(t)})}getProductsByCategory(e){let t=V(this.firestore,"products"),i=te(t,oe("category","==",e));return $(i,{idField:"id"})}getProductById(e){let t=w(this.firestore,`products/${e}`);return Y(t,{idField:"id"})}};a.\u0275fac=function(t){return new(t||a)(T(X),T(ae))},a.\u0275prov=O({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();var ke=["modal"],Ee=["sentinela"],Re=["segmentContainer"];function Ve(o,a){if(o&1&&(r(0,"ion-segment-button",12)(1,"ion-label"),l(2),c()()),o&2){let n=a.$implicit;g("value",n),s(2),x(n.toUpperCase())}}function Te(o,a){if(o&1){let n=P();r(0,"ion-card",14),h("click",function(){u(n);let t=d().$implicit,i=d();return f(i.abrirModal(t))}),r(1,"ion-item",15)(2,"ion-thumbnail",16),p(3,"img",17),c(),r(4,"ion-label")(5,"h2"),l(6),c(),r(7,"p"),l(8),c(),r(9,"div",18)(10,"strong"),l(11),C(12,"number"),c(),r(13,"ion-button",19),h("click",function(t){u(n);let i=d().$implicit;return d().adicionar(i),f(t.stopPropagation())}),p(14,"ion-icon",20),c()()()()()}if(o&2){let n=d().$implicit;s(3),g("src",n.imagem,F),s(3),x(n.nome),s(2),x(n.descricao),s(3),I("R$ ",v(12,4,n.preco,"1.2-2"),"")}}function qe(o,a){if(o&1&&(N(0),_(1,Te,15,7,"ion-card",13),j()),o&2){let n=a.$implicit,e=d();s(),g("ngIf",n.categoria===e.categoriaSelecionada)}}function Fe(o,a){if(o&1&&(r(0,"ion-footer",21)(1,"ion-toolbar")(2,"div",22)(3,"div",23),l(4),C(5,"number"),c(),r(6,"ion-button",24),p(7,"ion-icon",25),l(8," Ver pedido "),c()()()()),o&2){let n=d();s(4),Q(" Total sem entrega (",n.pedidoService.totalItens," itens - R$ ",v(5,2,n.pedidoService.total,"1.2-2"),") ")}}function Ne(o,a){if(o&1){let n=P();r(0,"ion-item")(1,"ion-label"),l(2),c(),r(3,"ion-note",44),l(4),C(5,"number"),c(),r(6,"ion-button",45),h("click",function(){let t=u(n).$implicit,i=d(3);return f(i.adicionarExtra(t))}),p(7,"ion-icon",41),c()()}if(o&2){let n=a.$implicit;s(2),x(n.nome),s(2),I("+ R$ ",v(5,2,n.valor,"1.2-2"),"")}}function je(o,a){if(o&1&&(N(0),r(1,"h3"),l(2,"Acr\xE9scimos"),c(),r(3,"p",43),l(4,"Selecione at\xE9 4 op\xE7\xF5es"),c(),r(5,"ion-list"),_(6,Ne,8,5,"ion-item",9),c(),j()),o&2){let n=d(2);s(6),g("ngForOf",n.selectedItem.extras)}}function $e(o,a){if(o&1){let n=P();r(0,"ion-content",26)(1,"div",27)(2,"div",28),p(3,"img",17),c(),r(4,"div",29)(5,"div",30)(6,"h2"),l(7),c(),r(8,"ion-button",31),h("click",function(){u(n),d();let t=A(12);return f(t.dismiss())}),p(9,"ion-icon",32),c()(),r(10,"p",33),l(11),c(),r(12,"p",34),l(13),C(14,"number"),c(),_(15,je,7,1,"ng-container",35),c()()(),r(16,"ion-footer",36)(17,"div",37)(18,"div",38)(19,"ion-button",39),h("click",function(){u(n);let t=d();return f(t.decrementar())}),p(20,"ion-icon",40),c(),r(21,"span"),l(22),c(),r(23,"ion-button",39),h("click",function(){u(n);let t=d();return f(t.incrementar())}),p(24,"ion-icon",41),c()(),r(25,"ion-button",42),h("click",function(){u(n);let t=d();return f(t.adicionarAoPedido())}),l(26),C(27,"number"),c()()()}if(o&2){let n=d();s(3),g("src",n.selectedItem==null?null:n.selectedItem.imagem,F),s(4),x(n.selectedItem==null?null:n.selectedItem.nome),s(4),x(n.selectedItem==null?null:n.selectedItem.descricao),s(2),I("R$ ",v(14,7,n.selectedItem==null?null:n.selectedItem.preco,"1.2-2"),""),s(2),g("ngIf",n.selectedItem==null||n.selectedItem.extras==null?null:n.selectedItem.extras.length),s(7),x(n.quantidade),s(4),I(" Adicionar R$ ",v(27,10,n.calcularTotal(),"1.2-2")," ")}}var nt=(()=>{let a=class a{constructor(){this.productService=q(Oe),this.pedidoService=q(Se),this.categoriaSelecionada="hamburguer",this.categorias=[],this.produtos=[],this.quantidade=1,this.loading=z(!1)}ngOnInit(){this.getAll(),this.presentingElement=document.querySelector(".ion-page")}ngAfterViewInit(){let e=this.segmentContainerRef.nativeElement,t=this.sentinelaRef.nativeElement;this.observer=new IntersectionObserver(([i])=>{e.classList.toggle("fixed-segment",!i.isIntersecting)},{root:null,threshold:0}),this.observer.observe(t)}ngOnDestroy(){var e;this.observer&&((e=this.sentinelaRef)!=null&&e.nativeElement)&&this.observer.unobserve(this.sentinelaRef.nativeElement)}getAll(){this.loading.set(!0),this.produtos=[{id:1,nome:"Numero 1",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado e 1 carne.",preco:11,categoria:"hamburguer",imagem:"assets/images/burguer1.png",extras:[{nome:"Carne",valor:2.5},{nome:"Cheddar fatiado",valor:2},{nome:"Ovo",valor:1.5},{nome:"Bacon",valor:2}]},{id:2,nome:"Numero 2",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado, 1 ovo e 2 carnes.",preco:13.5,categoria:"hamburguer",imagem:"assets/images/burguer2.png"},{id:3,nome:"Numero 3",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado e 1 carne.",preco:11,categoria:"hamburguer",imagem:"assets/images/burguer1.png"},{id:4,nome:"Numero 4",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado, 1 ovo e 2 carnes.",preco:13.5,categoria:"hamburguer",imagem:"assets/images/burguer2.png"},{id:5,nome:"Numero 5",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado e 1 carne.",preco:11,categoria:"hamburguer",imagem:"assets/images/burguer1.png"},{id:6,nome:"Numero 6",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado, 1 ovo e 2 carnes.",preco:13.5,categoria:"hamburguer",imagem:"assets/images/burguer2.png"},{id:7,nome:"Numero 7",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado e 1 carne.",preco:11,categoria:"hamburguer",imagem:"assets/images/burguer1.png"},{id:8,nome:"Numero 8",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado, 1 ovo e 2 carnes.",preco:13.5,categoria:"hamburguer",imagem:"assets/images/burguer2.png"},{id:9,nome:"Numero 9",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado e 1 carne.",preco:11,categoria:"hamburguer",imagem:"assets/images/burguer1.png"},{id:10,nome:"Numero 10",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado, 1 ovo e 2 carnes.",preco:13.5,categoria:"hamburguer",imagem:"assets/images/burguer2.png"},{id:11,nome:"Numero 11",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado e 1 carne.",preco:11,categoria:"hamburguer",imagem:"assets/images/burguer1.png"},{id:12,nome:"Numero 12",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado, 1 ovo e 2 carnes.",preco:13.5,categoria:"hamburguer",imagem:"assets/images/burguer2.png"},{id:13,nome:"Numero 13",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado e 1 carne.",preco:11,categoria:"hamburguer",imagem:"assets/images/burguer1.png"},{id:14,nome:"Numero 14",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado, 1 ovo e 2 carnes.",preco:13.5,categoria:"hamburguer",imagem:"assets/images/burguer2.png"},{id:1,nome:"Guaran\xE1 natural",descricao:"Refresco de guaran\xE1 natural 290ml.",preco:3,categoria:"Bebidas",imagem:"assets/images/guaracamp.png"},{id:2,nome:"Refrigerante de guaran\xE1",descricao:"Refrigerante de guaran\xE1 2l.",preco:9,categoria:"Bebidas",imagem:"assets/images/guarana-antartica.png"}],this.categorias=[...new Set(this.produtos.map(e=>e.categoria))],this.loading.set(!1)}adicionar(e){this.pedidoService.adicionarItem(e)}abrirModal(e){this.selectedItem=e,this.quantidade=1,this.modal.present()}incrementar(){this.quantidade++}decrementar(){this.quantidade>1&&this.quantidade--}adicionarExtra(e){e.quantidade=(e.quantidade||0)+1}calcularTotal(){var i,m;let e=((i=this.selectedItem)==null?void 0:i.preco)||0,t=(((m=this.selectedItem)==null?void 0:m.extras)||[]).reduce((B,b)=>B+(b.quantidade||0)*b.valor,0);return e*this.quantidade+t}adicionarAoPedido(){var t;let e=M(y({},this.selectedItem),{quantidade:this.quantidade,extras:(t=this.selectedItem.extras)==null?void 0:t.filter(i=>i.quantidade),total:this.calcularTotal()});this.pedidoService.adicionarItem(e),this.modal.dismiss()}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=D({type:a,selectors:[["app-products"]],viewQuery:function(t,i){if(t&1&&(k(ke,7),k(Ee,7),k(Re,7)),t&2){let m;E(m=R())&&(i.modal=m.first),E(m=R())&&(i.sentinelaRef=m.first),E(m=R())&&(i.segmentContainerRef=m.first)}},decls:14,vars:5,consts:[["sentinela",""],["segmentContainer",""],["modal",""],[1,"ion-padding","no-overlap"],[1,"sentinela"],[1,"segment-container"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"card-grid"],[4,"ngFor","ngForOf"],["class","footer-toolbar",4,"ngIf"],["trigger","open-modal",3,"presentingElement"],[3,"value"],["class","produto-card",3,"click",4,"ngIf"],[1,"produto-card",3,"click"],["lines","none"],["slot","start"],[3,"src"],[1,"preco-adicionar"],["size","small","fill","solid",3,"click"],["slot","icon-only","name","add"],[1,"footer-toolbar"],[1,"footer-content"],[1,"footer-text"],["fill","solid"],["slot","start","name","eye-outline"],["fullscreen",""],[1,"modal-container"],[1,"modal-image"],[1,"modal-details"],[1,"modal-header"],["fill","clear","size","small",3,"click"],["name","close","slot","icon-only"],[1,"descricao"],[1,"preco"],[4,"ngIf"],[1,"modal-footer"],[1,"footer-bar"],[1,"quantidade-selector"],["fill","clear",3,"click"],["name","remove-outline"],["name","add-outline"],["color","danger","expand","block",3,"click"],[1,"sub"],["slot","end"],["fill","clear","slot","end","size","small",3,"click"]],template:function(t,i){if(t&1){let m=P();r(0,"ion-content",3),p(1,"div",4,0),r(3,"div",5,1)(5,"ion-segment",6),W("ngModelChange",function(b){return u(m),U(i.categoriaSelecionada,b)||(i.categoriaSelecionada=b),f(b)}),_(6,Ve,3,2,"ion-segment-button",7),c()(),r(7,"ion-list")(8,"div",8),_(9,qe,2,1,"ng-container",9),c()(),_(10,Fe,9,5,"ion-footer",10),c(),r(11,"ion-modal",11,2),_(13,$e,28,13,"ng-template"),c()}t&2&&(s(5),L("ngModel",i.categoriaSelecionada),s(),g("ngForOf",i.categorias),s(3),g("ngForOf",i.produtos),s(),g("ngIf",i.pedidoService.totalItens>0),s(),g("presentingElement",i.presentingElement))},dependencies:[K,G,H,J,de,le,me,ue,pe,Ie,_e,we,be,ve,fe,ye,xe,he,Pe,ge,Ce],styles:[".produto-card[_ngcontent-%COMP%]{margin-bottom:12px;box-shadow:0 2px 8px #0000000d;border-radius:12px;cursor:pointer}.segment-container[_ngcontent-%COMP%]{position:relative;z-index:10}.fixed-segment[_ngcontent-%COMP%]{position:sticky;top:-20px;z-index:100;background:#fff;border-bottom:1px solid #ccc}.sentinela[_ngcontent-%COMP%]{height:60px}ion-thumbnail[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:8px;overflow:hidden}ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:600}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:.9rem;color:#555}.produto-card[_ngcontent-%COMP%]{margin-bottom:12px}.preco-adicionar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:8px}.card-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px;margin-top:16px}ion-content[_ngcontent-%COMP%]{height:88vh}ion-footer[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0}.footer-toolbar[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #f07d59}.footer-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 12px;gap:12px;flex-wrap:nowrap}.footer-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-right:2rem;--background: #222428}.footer-text[_ngcontent-%COMP%]{font-size:16px;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}@media (max-width: 767px){.footer-text[_ngcontent-%COMP%]{font-size:13px;white-space:normal}.footer-content[_ngcontent-%COMP%]{align-items:center}}.modal-container[_ngcontent-%COMP%]{display:flex;height:100%}.modal-image[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;background-color:#d7d8da}.modal-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:cover}.modal-details[_ngcontent-%COMP%]{flex:1;padding:16px;background:#fff;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:600}.descricao[_ngcontent-%COMP%]{color:#555;font-size:14px;margin-bottom:8px}.preco[_ngcontent-%COMP%]{font-weight:700;font-size:18px;margin-bottom:16px}.modal-footer[_ngcontent-%COMP%]{padding:8px 16px;border-top:1px solid #ccc;background-color:#fff}.footer-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px}.quantidade-selector[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:8px;box-shadow:0 2px 4px #0000003d;width:30%}"]});let o=a;return o})();export{nt as ProductsComponent};
