import{A as _,B as k,C as q,D as R,F as j,H as N,I as D,Q as F,a as m,b as f,c as h,d as P,e as C,i as g,j as u,k as l,p as v,r as y,t as b,u as M,v as p,w,x as i,y as O,z as I}from"./chunk-KY7HLENW.js";import"./chunk-ZLCAYCYP.js";import"./chunk-Q7REX3DA.js";import"./chunk-AJDGBATU.js";import"./chunk-SNVLB7FR.js";import"./chunk-NH7O73XC.js";import"./chunk-LYYJ2XOB.js";import"./chunk-4U6PRYVA.js";import"./chunk-4EC74IQP.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-D4VGNZLR.js";import"./chunk-JHLW7V75.js";import"./chunk-SV7S5NYR.js";import{a as c,b as s,f as d}from"./chunk-RW4GY4BD.js";var z=(()=>{let o=class o{constructor(){this.itens=[]}get totalItens(){return this.itens.length}get total(){return console.log(this.itens),this.itens.reduce((e,t)=>e+t.preco,0)}adicionarItem(e){this.itens.push(e)}limparPedido(){this.itens=[]}};o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=m({token:o,factory:o.\u0275fac,providedIn:"root"});let n=o;return n})();var B=(()=>{let o=class o{constructor(e,t){this.firestore=e,this.storage=t}uploadImage(e,t){return d(this,null,function*(){let a=`products/${t}/${e.name}`,r=N(this.storage,a);return yield D(r,e),yield j(r)})}create(e){let t=O(),a=i(p(t,"products"));return _(a,s(c({},e),{id:a.id}))}getAll(){let e=p(this.firestore,"products");return b(e,{idField:"id"})}update(e,t){return d(this,null,function*(){let a=i(this.firestore,`products/${e}`);yield k(a,t)})}delete(e){return d(this,null,function*(){let t=i(this.firestore,`products/${e}`);yield w(t)})}getProductsByCategory(e){let t=p(this.firestore,"products"),a=I(t,q("category","==",e));return b(a,{idField:"id"})}getProductById(e){let t=i(this.firestore,`products/${e}`);return M(t,{idField:"id"})}};o.\u0275fac=function(t){return new(t||o)(f(y),f(R))},o.\u0275prov=m({token:o,factory:o.\u0275fac,providedIn:"root"});let n=o;return n})();var Q=["modal"],A=["sentinela"],T=["segmentContainer"],oe=(()=>{let o=class o{constructor(){this.productService=h(B),this.pedidoService=h(z),this.categoriaSelecionada="hamburguer",this.categorias=[],this.produtos=[],this.quantidade=1,this.loading=P(!1)}ngOnInit(){this.getAll(),this.presentingElement=document.querySelector(".ion-page")}ngAfterViewInit(){let e=this.segmentContainerRef.nativeElement,t=this.sentinelaRef.nativeElement;this.observer=new IntersectionObserver(([a])=>{e.classList.toggle("fixed-segment",!a.isIntersecting)},{root:null,threshold:0}),this.observer.observe(t)}ngOnDestroy(){var e;this.observer&&((e=this.sentinelaRef)!=null&&e.nativeElement)&&this.observer.unobserve(this.sentinelaRef.nativeElement)}getAll(){this.loading.set(!0),this.produtos=[{id:1,nome:"Numero 1",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado e 1 carne.",preco:11,categoria:"hamburguer",imagem:"assets/images/burguer1.png",extras:[{nome:"Carne",valor:2.5},{nome:"Cheddar fatiado",valor:2},{nome:"Ovo",valor:1.5},{nome:"Bacon",valor:2}]},{id:2,nome:"Numero 2",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado, 1 ovo e 2 carnes.",preco:13.5,categoria:"hamburguer",imagem:"assets/images/burguer2.png"},{id:3,nome:"Numero 3",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado e 1 carne.",preco:11,categoria:"hamburguer",imagem:"assets/images/burguer1.png"},{id:4,nome:"Numero 4",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado, 1 ovo e 2 carnes.",preco:13.5,categoria:"hamburguer",imagem:"assets/images/burguer2.png"},{id:5,nome:"Numero 5",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado e 1 carne.",preco:11,categoria:"hamburguer",imagem:"assets/images/burguer1.png"},{id:6,nome:"Numero 6",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado, 1 ovo e 2 carnes.",preco:13.5,categoria:"hamburguer",imagem:"assets/images/burguer2.png"},{id:7,nome:"Numero 7",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado e 1 carne.",preco:11,categoria:"hamburguer",imagem:"assets/images/burguer1.png"},{id:8,nome:"Numero 8",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado, 1 ovo e 2 carnes.",preco:13.5,categoria:"hamburguer",imagem:"assets/images/burguer2.png"},{id:9,nome:"Numero 9",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado e 1 carne.",preco:11,categoria:"hamburguer",imagem:"assets/images/burguer1.png"},{id:10,nome:"Numero 10",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado, 1 ovo e 2 carnes.",preco:13.5,categoria:"hamburguer",imagem:"assets/images/burguer2.png"},{id:11,nome:"Numero 11",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado e 1 carne.",preco:11,categoria:"hamburguer",imagem:"assets/images/burguer1.png"},{id:12,nome:"Numero 12",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado, 1 ovo e 2 carnes.",preco:13.5,categoria:"hamburguer",imagem:"assets/images/burguer2.png"},{id:13,nome:"Numero 13",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado e 1 carne.",preco:11,categoria:"hamburguer",imagem:"assets/images/burguer1.png"},{id:14,nome:"Numero 14",descricao:"P\xE3o com gergilim, ketchup, mostarda, cebola, alface, tomate, presunto, cheddar fatiado, 1 ovo e 2 carnes.",preco:13.5,categoria:"hamburguer",imagem:"assets/images/burguer2.png"},{id:1,nome:"Guaran\xE1 natural",descricao:"Refresco de guaran\xE1 natural 290ml.",preco:3,categoria:"Bebidas",imagem:"assets/images/guaracamp.png"},{id:2,nome:"Refrigerante de guaran\xE1",descricao:"Refrigerante de guaran\xE1 2l.",preco:9,categoria:"Bebidas",imagem:"assets/images/guarana-antartica.png"}],this.categorias=[...new Set(this.produtos.map(e=>e.categoria))],this.loading.set(!1)}adicionar(e){this.pedidoService.adicionarItem(e)}abrirModal(e){this.selectedItem=e,this.quantidade=1,this.modal.present()}incrementar(){this.quantidade++}decrementar(){this.quantidade>1&&this.quantidade--}adicionarExtra(e){e.quantidade=(e.quantidade||0)+1}calcularTotal(){var a,r;let e=((a=this.selectedItem)==null?void 0:a.preco)||0,t=(((r=this.selectedItem)==null?void 0:r.extras)||[]).reduce((E,x)=>E+(x.quantidade||0)*x.valor,0);return e*this.quantidade+t}adicionarAoPedido(){var t;let e=s(c({},this.selectedItem),{quantidade:this.quantidade,extras:(t=this.selectedItem.extras)==null?void 0:t.filter(a=>a.quantidade),total:this.calcularTotal()});this.pedidoService.adicionarItem(e),this.modal.dismiss()}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=C({type:o,selectors:[["app-products"]],viewQuery:function(t,a){if(t&1&&(g(Q,7),g(A,7),g(T,7)),t&2){let r;u(r=l())&&(a.modal=r.first),u(r=l())&&(a.sentinelaRef=r.first),u(r=l())&&(a.segmentContainerRef=r.first)}},decls:0,vars:0,template:function(t,a){},dependencies:[v,F],styles:[".produto-card[_ngcontent-%COMP%]{margin-bottom:12px;box-shadow:0 2px 8px #0000000d;border-radius:12px;cursor:pointer}.segment-container[_ngcontent-%COMP%]{position:relative;z-index:10}.fixed-segment[_ngcontent-%COMP%]{position:sticky;top:-20px;z-index:100;background:#fff;border-bottom:1px solid #ccc}.sentinela[_ngcontent-%COMP%]{height:60px}ion-thumbnail[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:8px;overflow:hidden}ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:600}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:.9rem;color:#555}.produto-card[_ngcontent-%COMP%]{margin-bottom:12px}.preco-adicionar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:8px}.card-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px;margin-top:16px}ion-content[_ngcontent-%COMP%]{height:88vh}ion-footer[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0}.footer-toolbar[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #f07d59}.footer-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 12px;gap:12px;flex-wrap:nowrap}.footer-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-right:2rem;--background: #222428}.footer-text[_ngcontent-%COMP%]{font-size:16px;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}@media (max-width: 767px){.footer-text[_ngcontent-%COMP%]{font-size:13px;white-space:normal}.footer-content[_ngcontent-%COMP%]{align-items:center}}.modal-container[_ngcontent-%COMP%]{display:flex;height:100%}.modal-image[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;background-color:#d7d8da}.modal-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:cover}.modal-details[_ngcontent-%COMP%]{flex:1;padding:16px;background:#fff;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:600}.descricao[_ngcontent-%COMP%]{color:#555;font-size:14px;margin-bottom:8px}.preco[_ngcontent-%COMP%]{font-weight:700;font-size:18px;margin-bottom:16px}.modal-footer[_ngcontent-%COMP%]{padding:8px 16px;border-top:1px solid #ccc;background-color:#fff}.footer-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px}.quantidade-selector[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:8px;box-shadow:0 2px 4px #0000003d;width:30%}"]});let n=o;return n})();export{oe as ProductsComponent};
