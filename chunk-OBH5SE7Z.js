import{a as ne}from"./chunk-SRKJIEVE.js";import"./chunk-FEU3AHM7.js";import{a as O,b as j,c as L,d as U,e as z,f as B,g as $,h as H,i as R,j as J,k as K,l as Q,m as W,n as X,o as Y,q as Z,r as ee,s as te,u as ie,v as oe}from"./chunk-6XE2P2XF.js";import"./chunk-VXEKP7ON.js";import{E,Ea as T,F as c,Fa as w,G as u,I as S,Ia as F,Jb as p,Kb as P,Lb as A,M as f,Nb as V,Ob as k,P as l,Pb as G,Q as t,R as e,S as d,Sb as q,Tb as D,Ub as M,W as y,X as g,Y as x,ea as m,ga as N,w as C,x as I}from"./chunk-E2VDJ7QC.js";import"./chunk-6VW3CEQN.js";import"./chunk-OQUPQ2G2.js";import"./chunk-IP3IRUG3.js";import"./chunk-MBM7MXDW.js";import"./chunk-HC6MZPB3.js";import"./chunk-JGAOYOBM.js";import"./chunk-RMJ7PCZJ.js";import"./chunk-5S2DIWXE.js";import"./chunk-LEIMCQKJ.js";import"./chunk-NMOQYINK.js";import"./chunk-SV7QHDBO.js";import"./chunk-GNOVVPTF.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-4KO2SR2V.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import"./chunk-LZJBAANE.js";import"./chunk-GEL3VHWS.js";import"./chunk-CESVDTFF.js";import"./chunk-NH7O73XC.js";import"./chunk-LYYJ2XOB.js";import"./chunk-4RGYXDAY.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-SV7S5NYR.js";import{a as b,b as _,f as h}from"./chunk-RW4GY4BD.js";function re(r,a){if(r&1){let s=y();t(0,"div",13)(1,"ion-item"),d(2,"ion-input",14)(3,"ion-input",15),t(4,"ion-button",16),g("click",function(){let o=C(s).index,n=x();return I(n.removeExtra(o))}),d(5,"ion-icon",17),e()()()}if(r&2){let s=a.$implicit;l("formGroup",s)}}function ae(r,a){if(r&1&&(t(0,"ion-select-option",18),m(1),e()),r&2){let s=a.$implicit;l("value",s.path),c(),N(" ",s.name," ")}}function me(r,a){if(r&1&&(t(0,"div",19),d(1,"img",20),e()),r&2){let s=x();c(),l("src",s.form.value.imagem,E)}}var ve=(()=>{let a=class a{constructor(i,o,n,v){this.fb=i,this.productService=o,this.toast=n,this.loadingCtrl=v,this.imagens=[{name:"N\xFAmero 1",path:"assets/images/burguer1.png"},{name:"N\xFAmero 2",path:"assets/images/burguer2.png"},{name:"N\xFAmero 3",path:"assets/images/burguer1.png"},{name:"Guaran\xE1 natural",path:"assets/images/guaracamp.png"}],this.form=this.fb.group({nome:["",p.required],descricao:[""],preco:[null,p.required],categoria:["",p.required],imagem:["",p.required],extras:this.fb.array([])})}get extras(){return this.form.get("extras")}addExtra(){let i=this.fb.group({nome:["",p.required],valor:[0,p.required]});this.extras.push(i)}removeExtra(i){this.extras.removeAt(i)}getExtrasControls(){return this.form.get("extras").controls}submit(){return h(this,null,function*(){if(this.form.invalid){this.showToast("Preencha todos os campos obrigat\xF3rios.");return}let i=yield this.loadingCtrl.create({message:"Salvando..."});yield i.present();try{let o=this.form.value,n=crypto.randomUUID();yield this.productService.create(_(b({},o),{id:n})),this.form.reset(),this.extras.clear(),this.showToast("Produto cadastrado com sucesso!")}catch(o){console.error(o),this.showToast("Erro ao cadastrar produto.")}finally{i.dismiss()}})}showToast(i){return h(this,null,function*(){(yield this.toast.create({message:i,duration:2e3,position:"bottom"})).present()})}};a.\u0275fac=function(o){return new(o||a)(u(q),u(ne),u(ie),u(te))},a.\u0275cmp=S({type:a,selectors:[["app-admin-product"]],decls:37,vars:5,consts:[[1,"ion-padding"],[3,"ngSubmit","formGroup"],["position","stacked"],["formControlName","nome"],["formControlName","descricao"],["type","number","formControlName","preco"],["formControlName","categoria"],["fill","clear","size","small",3,"click"],[3,"formGroup",4,"ngFor","ngForOf"],["formControlName","imagem","interface","popover","placeholder","Selecione uma imagem"],[3,"value",4,"ngFor","ngForOf"],["class","preview",4,"ngIf"],["type","submit","expand","block",3,"disabled"],[3,"formGroup"],["placeholder","Nome do extra","formControlName","nome"],["placeholder","Valor","type","number","formControlName","valor"],["fill","clear","color","danger",3,"click"],["slot","icon-only","name","trash-outline"],[3,"value"],[1,"preview"],["alt","Preview",3,"src"]],template:function(o,n){o&1&&(t(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),m(3,"Cadastrar Produto"),e()()(),t(4,"ion-content",0)(5,"form",1),g("ngSubmit",function(){return n.submit()}),t(6,"ion-item")(7,"ion-label",2),m(8,"Nome *"),e(),d(9,"ion-input",3),e(),t(10,"ion-item")(11,"ion-label",2),m(12,"Descri\xE7\xE3o"),e(),d(13,"ion-textarea",4),e(),t(14,"ion-item")(15,"ion-label",2),m(16,"Pre\xE7o *"),e(),d(17,"ion-input",5),e(),t(18,"ion-item")(19,"ion-label",2),m(20,"Categoria *"),e(),d(21,"ion-input",6),e(),t(22,"ion-list")(23,"ion-item-divider")(24,"ion-label"),m(25,"Extras"),e(),t(26,"ion-button",7),g("click",function(){return n.addExtra()}),m(27,"Adicionar"),e()(),f(28,re,6,1,"div",8),e(),t(29,"ion-item")(30,"ion-label",2),m(31,"Imagem *"),e(),t(32,"ion-select",9),f(33,ae,2,2,"ion-select-option",10),e()(),f(34,me,2,1,"div",11),t(35,"ion-button",12),m(36," Salvar Produto "),e()()()),o&2&&(c(5),l("formGroup",n.form),c(23),l("ngForOf",n.getExtrasControls()),c(5),l("ngForOf",n.imagens),c(),l("ngIf",n.form.value.imagem),c(),l("disabled",n.form.invalid))},dependencies:[F,T,w,oe,U,z,B,$,H,R,J,K,Q,W,X,Y,Z,ee,O,j,L,D,V,P,A,M,k,G],encapsulation:2});let r=a;return r})();export{ve as AdminProductComponent};
